!function(n){function o(){e&&(a(o),n.fx.tick())}for(var e,t=0,i=["webkit","moz"],a=window.requestAnimationFrame,d=window.cancelAnimationFrame;t<i.length&&!a;t++)a=window[i[t]+"RequestAnimationFrame"],d=d||window[i[t]+"CancelAnimationFrame"]||window[i[t]+"CancelRequestAnimationFrame"];a?(window.requestAnimationFrame=a,window.cancelAnimationFrame=d,n.fx.timer=function(t){t()&&n.timers.push(t)&&!e&&(e=!0,o())},n.fx.stop=function(){e=!1}):(window.requestAnimationFrame=function(n){var o=(new Date).getTime(),e=Math.max(0,16-(o-t)),i=window.setTimeout(function(){n(o+e)},e);return t=o+e,i},window.cancelAnimationFrame=function(n){clearTimeout(n)})}(jQuery),$(window).on("touchmove selectstart dragstart MSGestureHold MSPointerMove pointermove",!1),$(window).load(function(){function n(n){o(n.target)}function o(n){n.src!==l&&-1===$.inArray(n,u)&&(u.push(n),s.length===u.length&&e())}function e(){s.unbind(".imagesLoaded",n),d(),API.start?API.start():API.ready()}function t(n){n.on("mouseenter pointermove",function(o){o&&o.stopImmediatePropagation();var e=n.attr("soundBiteData");c?c.paused&&a(e):a(e),$(o.currentTarget).mouseleave(function(n){n&&(n.stopImmediatePropagation(),i(null))})})}function i(n){c&&(c.pause(),c.removeEventListener("ended",i),c=null,n&&API.onSoundBiteFinished?API.onSoundBiteFinished():API.onSoundBitePaused&&API.onSoundBitePaused())}function a(n){c=new Audio,c.src=n,c.load(),c.addEventListener("ended",i),c.play(),API.onSoundBitePlaying&&API.onSoundBitePlaying()}function d(){$("#applet").find(".soundBite").each(function(){t($(this))})}function r(n){var o=n.originalEvent.data;o=o.replace(/\s/g," ");var e=jQuery.parseJSON(o);window.API[e.command]&&window.API[e.command](e.param)}jQuery.fx.interval=40,$(window).on("message",r),$("audio").each(function(){var n=$(this);n.parent().addClass("audioText").on("click",audio).data("audio",n.find("source").attr("src")),n.remove()});var s=$("img"),u=[],c=null,l="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";s.length?(s.bind("load.imagesLoaded error.imagesLoaded",n),s.each(function(n,e){var t=e.src;return void 0!==e.naturalWidth?void o(e):void((e.readyState||e.complete)&&(e.src=l,e.src=t))})):e()}),window.API={info:function(n){window.parent.postMessage('{"command":"info","id":"'+n+'"}',"*")},popup:function(){var n,o,e,t;if(arguments.length>1&&isNaN(arguments[1]))n=arguments[0],o=arguments[1],e=arguments[2],t=arguments[3];else{var i=$("#"+arguments[0]);n=i.attr("title"),o=i.html(),e=arguments[1],t=arguments[2]}return window.self!=window.top?(n=n.replace(/"/g,'"'),o=o.replace(/"/g,'\\"'),void window.parent.postMessage('{"command":"popup","title":"'+n+'","content":"'+o+'","width":"'+e+'","height":"'+t+'"}',"*")):void alert(o)},start:null,ready:function(){$("#applet").css("visibility","visible"),window.parent.postMessage('{"command":"loaded"}',"*")},openAudio:function(){window.parent.postMessage('{"command":"openAudio"}',"*")},closeAudio:function(){window.parent.postMessage('{"command":"closeAudio"}',"*")},scale:function(n){window.scaleRatio=n},onPopupOpen:$.noop,onPopupClose:$.noop,onAudioOpen:$.noop,onAudioClose:$.noop,onSoundBitePlaying:$.noop,onSoundBiteFinished:$.noop,onSoundBitePaused:$.noop},window.trace=function(){if(window.console&&window.console.log)if(1==arguments.length)console.log(arguments[0]);else try{console.log.apply(this,arguments)}catch(n){console.log(arguments)}},window.log=function(){var n=$("#console");n.length||(n=$('<div id="console"></div>'),n.css({position:"absolute",top:"0",left:"0","z-index":"99999",direction:"ltr","text-align":"left","font-size":"10pt",color:"white",opacity:.4,"line-height":"1em","pointer-events":"none"}),n.appendTo(document.body)),n.height()>500&&n.html("");var o=$.makeArray(arguments).join(",");""===o&&(o="[empty string]"),n.append('<pre style="display:inline; background:black; margin:0;">'+o+"</pre><br />")},window.audio=function(n){window.parent.postMessage('{"command":"audio","path":"'+(n.target?$(this).data("audio"):n)+'"}',"*")},window.info=API.info,window.popup=API.popup;