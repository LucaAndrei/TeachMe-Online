/*!Copyright (c) 2012 Ascendia Design*/$(function(){
	// Don't load all hacks on IE11
	if (navigator.userAgent.match(/Trident/i) && !navigator.userAgent.match(/MSIE/i)) {
		$(document).on('mouseleave', function (e) {
			$(this).trigger($.Event('mouseup', {
				pageX: e.pageX,
				pageY: e.pageY,
				target: e.target
			}));
		});
		return;
	}
	function c(e){m(e);if(o){v(e);return}n=b(e.target);var t=$(e.target);i&&t.trigger(y(e,"_mouseenter")),t.trigger(y(e,"_mousedown")),s=b(e.target),o=!0,u=!0}function h(e){var t,n,r,a,f,l,c;if(i&&!o)return;m(e);if(e.target){f=b(e.target),r=-1;for(n=0;n<s.length;n++){r=$.inArray(s[n],f);if(r>=0)break}r<0?(l=[],c=f):(l=s.slice(0,n),c=f.slice(0,r)),t=y(e,"_mouseleave"),t.target=s[0];for(n=0;n<l.length;n++)if($(l[n]).triggerHandler(t)===!1)break;t=y(e,"_mouseenter");for(r=0;r<c.length;r++)if($(c[r]).triggerHandler(t)===!1)break;s=f,$(e.target).trigger(y(e,"_mousemove")),u=!0}else u&&v()}function p(e){var t,r,a,f;if(!o||!u)return;m(e),$(e.target).trigger(y(e,"_mouseup"));for(r=0;r<s.length;r++)if($.inArray(s[r],n)>=0){$(s[r]).trigger(y(e,"_click"));break}i&&($(s[0]).trigger(y(e,"_mouseleave")),s=[]),o=!1}function d(e){u&&(!e.relatedTarget||e.relatedTarget.nodeName=="IFRAME")&&v()}function v(){o&&$(s[0]).trigger(y(a,"_mouseup")),$(s[0]).trigger(y(a,"_mouseleave")),s=[],o=!1,u=!1}function m(e){var t,n;t=window.scaleRatio?window.scaleRatio:1,r?(e.pageX=e.originalEvent.clientX,e.pageY=e.originalEvent.clientY):i&&(n=e.originalEvent.touches[0]?e.originalEvent.touches[0]:e.originalEvent.changedTouches[0],e.pageX=n.pageX,e.pageY=n.pageY),e.pageX=Math.round(e.pageX/t),e.pageY=Math.round(e.pageY/t),e.target=document.elementFromPoint(e.pageX,e.pageY);if(r&&e.target&&g(e.target)){var s=e.target,o=[];while(s&&g(s)){o.push(s),s.style.visibility="hidden";var u=document.elementFromPoint(e.pageX,e.pageY);s==u?s=s.parentNode:s=u}for(var f in o)o[f].style.visibility="visible";e.target=s}a=e}function g(e){return window.getComputedStyle(e).getPropertyValue("pointer-events")=="none"}function y(e,t){return $.Event(t,{pageX:e.pageX,pageY:e.pageY,target:e.target})}function b(e){var t=[];while(e)t.push(e),e=e.parentNode;return t.push(window),t}function w(e){var n=t.width(),r=t.height();if(n!=f||r!=l)f=n,l=r,o&&v()}function E(e){var t,n;if(typeof e=="object"){t={};for(n in e)t[S(n)]=e[n]}else t=S(e);return t}function S(t){var n=$.trim(t).split(" "),r="";for(var i=0;i<n.length;i++)n[i]&&(r+=(n[i]in e?"_":"")+n[i]+" ");return $.trim(r)}var e={mouseenter:1,mousedown:1,mousemove:1,mouseup:1,click:1,mouseleave:1},t=$(window),n,r=$.browser.msie,i=Boolean(window.navigator.msMaxTouchPoints)||"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,s=[],o=!1,u=!1,a,f=t.width(),l=t.height();i?(t.on("touchstart MSPointerDown",c),t.on("touchend MSPointerUp",p),t.on("touchmove MSPointerMove",h),r&&t.on("mouseout",d)):(t.on("mousedown",c),t.on("mouseup",p),t.on("mousemove",h),t.on("mouseout",d)),t.on("resize",w),t.on("orientationchange",w),$.fn._on=$.fn.on,$.fn.on=function(){return arguments[0]=E(arguments[0]),$.fn._on.apply(this,arguments)},$.fn._off=$.fn.off,$.fn.off=function(){return arguments[0]=E(arguments[0]),$.fn._off.apply(this,arguments)},$.browser.msie&&($.fn.position=function(){return{left:this[0].offsetLeft,top:this[0].offsetTop}},$.fn.offset=function(){var e=this[0],t=0,n=0;do t+=e.offsetLeft,n+=e.offsetTop;while(e=e.offsetParent);return{left:t,top:n}});if(window.createjs){createjs.Stage.prototype._enableMouseEvents=function(){var e=this,t=$(window);t.on("mouseup",function(t){e._handlePointerUp(-1,t,t.pageX,t.pageY)}),t.on("mousemove",function(t){e._handlePointerMove(-1,t,t.pageX,t.pageY)}),e.canvas&&$(e.canvas).on("mousedown",function(t){e._handlePointerDown(-1,t,t.pageX,t.pageY)})},window.createjs.Touch&&(createjs.Touch.enable=new Function,createjs.Touch.disable=new Function);if(navigator.userAgent.match(/MSIE [6789]/i)){var x=HTMLCanvasElement.prototype;x._getBoundingClientRect=x.getBoundingClientRect,x.getBoundingClientRect=function(){var e=window.scaleRatio?window.scaleRatio:1,t=x._getBoundingClientRect.call(this);return{left:t.left/e,right:t.right/e,top:t.top/e,bottom:t.bottom/e}}}}});